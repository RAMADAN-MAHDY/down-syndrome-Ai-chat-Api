# down Syndrome
## خادم API للدردشة الذكية

---

## وصف المشروع 
يعتمد المشروع على تقنيات حديثة مثل **Node.js** و**Express.js** لإنشاء خادم API، و**MongoDB** لتخزين البيانات، مع دمج الذكاء الاصطناعي عبر **OpenAI API** لتقديم خدمة دردشة ذكية.

---

## المميزات الرئيسية
- حماية وتأمين باستخدام **JWT** للتحقق من الهوية وتأمين الجلسات.
- إدارة المستخدمين وطلبات الحجز مع تخزين تاريخ المحادثات.
- دعم الدردشة الذكية التفاعلية مع العملاء.
- تتبع وتحليل نقرات المستخدمين لتحسين تجربة الاستخدام.
- تنظيم المسارات **API** بشكل واضح ومنظم.
- تأمين الخادم ضد الهجمات الشائعة (**XSS، NoSQL Injection، DDoS**) باستخدام **helmet** و**xss-clean** و**rate-limit**.

---

## دور الذكاء الاصطناعي في المشروع

- فهم رسائل الأهالي ومشاعرهم وتحليل الاستفسارات المتعلقة بمتلازمة داون.

- استخراج احتياجات الطفل بشكل ذكي (تنمية مهارات، أنشطة، دعم تعليمي، متابعة طبية).

- تقديم ردود عملية باللهجة السعودية تكون قريبة وسهلة الفهم.

- تسهيل تجربة الأهالي من خلال تزويدهم بنصائح وخطوات واضحة تساعدهم في التربية والدعم اليومي.

---

## التقنيات المستخدمة
- **Node.js** + **Express.js**
- **MongoDB**
- **gemini API**
- **JWT Authentication**
- **Helmet, XSS-Clean, Rate-Limit** (لحماية التطبيق)
- **dotenv** لإدارة المتغيرات البيئية

---

## كيفية التكامل وتشغيل المشروع

### المتطلبات الأساسية
- Node.js مثبت على الجهاز.
- قاعدة بيانات MongoDB (يمكن استخدام **MongoDB Atlas** أو تثبيت محلي).
- مفتاح API من OpenAI.

### خطوات التشغيل
1. **نسخ المشروع:**
   ```bash
   git clone <REPO_URL>
   cd khajAPI
```
````

2. **إعداد المتغيرات البيئية:**
   أنشئ ملف `.env` في جذر المشروع وأضف:

   ```env
   OPENAI_API_KEY="مفتاح_الAPI_الخاصة_بك"
   MONGODB_URI="رابط_الاتصال_بقاعدة_البيانات"
   JWT_SECRET="مفتاح_سري_لتوليد_الرموز"
   ```

3. **تثبيت الحزم:**

   ```bash
   npm install
   ```

4. **تشغيل الخادم:**

   ```bash
   node index.js
   ```

   أو:

   ```bash
   nodemon index.js
   ```

5. **الوصول إلى الـ API:**

   * `/chat` للدردشة الذكية.
   * `/analyze` لتحليل المحادثات.
   * `/users` لإدارة المستخدمين.

---

# API الدردشة  
## نقطة النهاية (Endpoint)
POST https://down-syndrome-ai-chat-api.vercel.app/chat
الوصف (Description)
يقوم نقطة النهاية بتنفيذ محادثة مع الذكاء الاصطناعي باستخدام API Gemini.

## الطلبات المسموح بها (Allowed Methods)

* POST

## الرؤوس المطلوبة (Required Headers)

* `Content-Type`: application/json
* `Authorization`: Bearer <JWT_TOKEN>

جسم الطلب (Request Body)
```json
{
  "message": "مرحبا  "
}
```

## مثال لرد API

```json
{
  "reply": "الرد من الشات بوت",
  "token": "توكن الجلسة الجديد أو الحالي"
}
```
---

## هيكل المشروع (Architecture)

![Architecture](./assets/Chatbot Architecture Diagram (6).png)

---

## هيكلية الملفات

* `index.js`: نقطة الدخول وضبط الخادم.
* `db.js`: الاتصال بقاعدة البيانات.
* `middleware/authMiddleware.js`: التحقق من التوكن وتأمين الجلسات.
* `routes/`: يحتوي على مسارات API المختلفة.
* `controllers/`: يحتوي على منطق التعامل مع الطلبات.
* `models/`: نماذج البيانات.
* `utils/jwt.js`: توليد والتحقق من JWT.

---

## ملاحظات هامة

* تأكد من أن قاعدة البيانات متصلة بشكل صحيح.
* تأكد من صحة مفاتيح API والمتغيرات البيئية.
* استخدم أدوات مثل **Postman** لاختبار نقاط النهاية API.

```

---